<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARQM AI Verification Survey</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        .step-content { display: none; }
        .step-content.active { display: block; }
        .animate-in {
            animation: fadeIn 0.4s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-900 font-sans min-h-screen p-4 sm:p-8">

    <div class="max-w-2xl mx-auto bg-white rounded-3xl shadow-xl overflow-hidden border border-gray-100">
        
        <!-- Progress Header -->
        <div class="bg-white border-b border-gray-100 px-6 py-6 sm:px-10">
            <div class="flex justify-between items-center mb-4">
                <div class="flex items-center gap-3">
                    <div class="bg-blue-600 p-2 rounded-lg">
                        <i data-lucide="shield-check" class="text-white w-6 h-6"></i>
                    </div>
                    <h1 class="text-xl font-bold tracking-tight">ARQM AI Verification</h1>
                </div>
                <span id="step-indicator" class="text-sm font-semibold text-blue-600 bg-blue-50 px-3 py-1 rounded-full">
                    Step 1 of 7
                </span>
            </div>
            <div class="w-full bg-gray-100 h-2 rounded-full overflow-hidden">
                <div id="progress-bar" class="bg-blue-600 h-full transition-all duration-500 ease-out" style="width: 0%"></div>
            </div>
        </div>

        <!-- Form Content -->
        <div id="form-container" class="p-6 sm:p-10 min-h-[450px]">
            
            <!-- Step 0: Welcome & Role -->
            <div id="step-0" class="step-content active animate-in space-y-6">
                <div class="bg-blue-50 p-6 rounded-2xl mb-8">
                    <h2 class="text-2xl font-bold text-blue-900 mb-2">Welcome</h2>
                    <p class="text-blue-800/80 leading-relaxed">
                        Help us shape the future of fire insulation verification. We are testing a tool that provides instant AI feedback on installation quality via photos.
                    </p>
                </div>
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-3 uppercase tracking-wide">What is your primary role?</label>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-3" id="role-options">
                        <!-- Roles injected by JS -->
                    </div>
                </div>
            </div>

            <!-- Step 1: Operational ROI -->
            <div id="step-1" class="step-content animate-in">
                <header class="mb-8">
                    <div class="flex items-center gap-2 text-blue-600 font-bold mb-1">
                        <i data-lucide="clipboard-check" class="w-5 h-5"></i>
                        <span class="uppercase text-sm tracking-widest">Part 1</span>
                    </div>
                    <h2 class="text-2xl font-bold">Operational ROI</h2>
                    <p class="text-gray-500 mt-1">Speed, Accuracy, and Cost Savings</p>
                </header>
                <div class="space-y-8" id="operational-questions"></div>
            </div>

            <!-- Step 2: Human Impact -->
            <div id="step-2" class="step-content animate-in">
                <header class="mb-8">
                    <div class="flex items-center gap-2 text-indigo-600 font-bold mb-1">
                        <i data-lucide="users" class="w-5 h-5"></i>
                        <span class="uppercase text-sm tracking-widest">Part 2</span>
                    </div>
                    <h2 class="text-2xl font-bold">Human Impact</h2>
                    <p class="text-gray-500 mt-1">Culture, Stress, and Learning</p>
                </header>
                <div class="space-y-8" id="human-questions"></div>
            </div>

            <!-- Step 3: Trust & Workflow -->
            <div id="step-3" class="step-content animate-in">
                <header class="mb-8">
                    <div class="flex items-center gap-2 text-emerald-600 font-bold mb-1">
                        <i data-lucide="hard-hat" class="w-5 h-5"></i>
                        <span class="uppercase text-sm tracking-widest">Part 3</span>
                    </div>
                    <h2 class="text-2xl font-bold">Trust & Workflow</h2>
                </header>
                <div class="space-y-8" id="trust-questions"></div>
                <div class="p-4 bg-amber-50 rounded-2xl flex gap-3 border border-amber-100 mt-8">
                    <i data-lucide="info" class="text-amber-600 shrink-0"></i>
                    <p class="text-sm text-amber-800">Note: We prioritize tools that support your judgment, not replace it.</p>
                </div>
            </div>

            <!-- Step 4: Risk -->
            <div id="step-4" class="step-content animate-in">
                <header class="mb-8">
                    <div class="flex items-center gap-2 text-rose-600 font-bold mb-1">
                        <i data-lucide="alert-triangle" class="w-5 h-5"></i>
                        <span class="uppercase text-sm tracking-widest">Part 4</span>
                    </div>
                    <h2 class="text-2xl font-bold">Risk Concerns</h2>
                    <p class="text-gray-500 mt-1">Potential blockers to adoption</p>
                </header>
                <div class="space-y-8" id="risk-questions"></div>
            </div>

            <!-- Step 5: Logistics -->
            <div id="step-5" class="step-content animate-in space-y-8">
                <header>
                    <div class="flex items-center gap-2 text-purple-600 font-bold mb-1">
                        <i data-lucide="smartphone" class="w-5 h-5"></i>
                        <span class="uppercase text-sm tracking-widest">Part 5</span>
                    </div>
                    <h2 class="text-2xl font-bold">Implementation Logistics</h2>
                </header>
                
                <div id="logistics-content" class="space-y-8">
                    <!-- Logistics injected by JS -->
                </div>
            </div>

            <!-- Step 6: Submit -->
            <div id="step-6" class="step-content animate-in text-center py-10">
                <div class="bg-emerald-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6">
                    <i data-lucide="check-circle-2" class="text-emerald-600 w-10 h-10"></i>
                </div>
                <h2 class="text-3xl font-black mb-4">Ready to Submit</h2>
                <p class="text-gray-500 mb-10 text-lg">Thank you for helping us develop the ARQM verification tool. Your feedback is vital for the "Digital Golden Thread" of fire safety.</p>
                <button onclick="location.reload()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-5 rounded-2xl flex items-center justify-center gap-3 transition-all shadow-lg shadow-blue-200">
                    <i data-lucide="send" class="w-5 h-5"></i>
                    Submit Feedback
                </button>
            </div>
        </div>

        <!-- Footer Navigation -->
        <div id="footer-nav" class="px-6 py-6 sm:px-10 bg-gray-50 border-t border-gray-100 flex justify-between gap-4">
            <button id="prev-btn" onclick="prevStep()" class="flex items-center gap-2 px-6 py-3 rounded-xl font-bold transition-all text-gray-300 cursor-not-allowed" disabled>
                <i data-lucide="chevron-left" class="w-5 h-5"></i>
                Back
            </button>
            <button id="next-btn" onclick="nextStep()" class="bg-gray-900 hover:bg-black text-white px-8 py-3 rounded-xl font-bold flex items-center gap-2 transition-all shadow-md active:scale-95">
                Continue
                <i data-lucide="chevron-right" class="w-5 h-5"></i>
            </button>
        </div>
    </div>
    
    <p class="text-center text-gray-400 text-sm mt-8 pb-10">
        ARQM Verification Survey &bull; Powered by TAM Framework
    </p>

    <script>
        let currentStep = 0;
        const totalSteps = 6;
        const formData = {
            role: '',
            topUnlocks: [],
            answers: {}
        };

        const roles = ['Installer', 'Site Supervisor', 'QA Inspector', 'Fire Specialist', 'Main Contractor'];
        
        const sections = {
            operational: [
                { id: 'q1', label: 'Would this tool reduce rework?', desc: 'Catching defects before walls are closed.' },
                { id: 'q2', label: 'Faster detection than current practice?', desc: '' },
                { id: 'q3', label: 'Faster than manual visual checks?', desc: '' },
                { id: 'q4', label: 'Catches mistakes I might miss?', desc: '' }
            ],
            human: [
                { id: 'q5', label: 'Would it prevent disagreements?', desc: 'Acting as an unbiased third-party judge.' },
                { id: 'q6', label: 'Faster learning for installers?', desc: '' },
                { id: 'q7', label: 'Improve confidence with inspectors?', desc: '' },
                { id: 'q8', label: 'Reduce your daily stress levels?', desc: 'Knowing the AI has your back.' }
            ],
            trust: [
                { id: 'q9', label: 'Easy to learn and use?', desc: '' },
                { id: 'q10', label: 'Easy to take valid photos on site?', desc: '' },
                { id: 'q13', label: 'Fits with existing sign-off processes?', desc: '' }
            ],
            risk: [
                { id: 'q15', label: 'I worry about blame or liability.', desc: 'Data being used negatively against you.' },
                { id: 'q16', label: 'I worry about false alarms causing delays.', desc: '' },
                { id: 'q17', label: 'I worry about missed defects.', desc: '' }
            ]
        };

        function init() {
            renderRoles();
            renderLikertSections();
            renderLogistics();
            updateUI();
            lucide.createIcons();
        }

        function renderRoles() {
            const container = document.getElementById('role-options');
            container.innerHTML = roles.map(role => `
                <button onclick="setRole('${role}')" id="role-${role}" class="role-btn p-4 rounded-xl border-2 text-left transition-all flex items-center gap-3 border-gray-100 hover:border-gray-300">
                    <div class="radio-circle w-4 h-4 rounded-full border-2 border-gray-300"></div>
                    <span class="font-medium">${role}</span>
                </button>
            `).join('');
        }

        function renderLikertSections() {
            for (const [key, questions] of Object.entries(sections)) {
                const container = document.getElementById(`${key}-questions`);
                if (!container) continue;
                container.innerHTML = questions.map(q => `
                    <div class="mb-8">
                        <div class="flex flex-col mb-3">
                            <span class="text-gray-900 font-medium text-lg leading-snug">${q.label}</span>
                            ${q.desc ? `<span class="text-gray-500 text-sm mt-1">${q.desc}</span>` : ''}
                        </div>
                        <div class="grid grid-cols-5 gap-2 sm:gap-4">
                            ${[1, 2, 3, 4, 5].map(val => `
                                <button onclick="setLikert('${q.id}', ${val})" id="btn-${q.id}-${val}" class="likert-btn py-3 sm:py-4 rounded-xl border-2 border-gray-100 bg-white text-gray-400 hover:border-gray-300 transition-all flex flex-col items-center justify-center">
                                    <span class="text-lg font-bold">${val}</span>
                                    <span class="text-[10px] uppercase tracking-wider hidden sm:block">${val === 1 ? 'Disagree' : val === 5 ? 'Agree' : ''}</span>
                                </button>
                            `).join('')}
                        </div>
                    </div>
                `).join('');
            }
        }

        function renderLogistics() {
            const container = document.getElementById('logistics-content');
            const times = ['< 10s', '10-20s', '20-45s', '60s+'];
            const styles = ['Simple Pass/Fail', 'Highlighted Photo', 'Checklist', 'Supervisor Escalation'];
            const unlocks = ['Low false alarms', 'Offline mode', 'Ability to override AI', 'Minimal taps', 'Integration with QA forms', 'Clear data rules'];

            container.innerHTML = `
                <div>
                    <label class="block font-bold text-gray-700 mb-3 uppercase text-xs tracking-wider">Max acceptable time per check?</label>
                    <div class="flex flex-wrap gap-2">
                        ${times.map(t => `<button onclick="setLogistic('maxTime', '${t}')" id="time-${t}" class="logistic-btn-time px-6 py-3 rounded-full border-2 border-gray-100 bg-white font-medium hover:border-gray-300 transition-all">${t}</button>`).join('')}
                    </div>
                </div>
                <div>
                    <label class="block font-bold text-gray-700 mb-3 uppercase text-xs tracking-wider">Best Output Style?</label>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                        ${styles.map(s => `<button onclick="setLogistic('outputStyle', '${s}')" id="style-${s}" class="logistic-btn-style p-4 rounded-xl border-2 border-gray-100 bg-white text-left font-medium hover:border-gray-300 transition-all">${s}</button>`).join('')}
                    </div>
                </div>
                <div>
                    <label class="block font-bold text-gray-700 mb-1 uppercase text-xs tracking-wider">Top 3 Unlocks</label>
                    <p class="text-sm text-gray-400 mb-4">Choose the features that matter most.</p>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-2">
                        ${unlocks.map(u => `
                            <button onclick="toggleUnlock('${u}')" id="unlock-${u}" class="unlock-btn p-3 rounded-lg border border-gray-200 bg-white text-sm text-left transition-all flex justify-between items-center">
                                ${u} <i data-lucide="check-circle-2" class="w-4 h-4 hidden text-white"></i>
                            </button>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function setRole(role) {
            formData.role = role;
            document.querySelectorAll('.role-btn').forEach(btn => {
                btn.classList.remove('border-blue-600', 'bg-blue-50');
                btn.querySelector('.radio-circle').classList.remove('bg-blue-600', 'border-blue-600');
            });
            const active = document.getElementById(`role-${role}`);
            active.classList.add('border-blue-600', 'bg-blue-50');
            active.querySelector('.radio-circle').classList.add('bg-blue-600', 'border-blue-600');
        }

        function setLikert(qid, val) {
            formData.answers[qid] = val;
            document.querySelectorAll(`[id^="btn-${qid}-"]`).forEach(btn => {
                btn.classList.remove('border-blue-600', 'bg-blue-50', 'text-blue-700', 'shadow-sm');
            });
            document.getElementById(`btn-${qid}-${val}`).classList.add('border-blue-600', 'bg-blue-50', 'text-blue-700', 'shadow-sm');
        }

        function setLogistic(key, val) {
            formData[key] = val;
            const selector = key === 'maxTime' ? '.logistic-btn-time' : '.logistic-btn-style';
            const prefix = key === 'maxTime' ? 'time-' : 'style-';
            document.querySelectorAll(selector).forEach(btn => btn.classList.remove('border-purple-600', 'bg-purple-50', 'text-purple-700'));
            document.getElementById(`${prefix}${val}`).classList.add('border-purple-600', 'bg-purple-50', 'text-purple-700');
        }

        function toggleUnlock(val) {
            const index = formData.topUnlocks.indexOf(val);
            if (index > -1) {
                formData.topUnlocks.splice(index, 1);
            } else if (formData.topUnlocks.length < 3) {
                formData.topUnlocks.push(val);
            }
            document.querySelectorAll('.unlock-btn').forEach(btn => {
                const uVal = btn.id.replace('unlock-', '');
                const icon = btn.querySelector('i');
                if (formData.topUnlocks.includes(uVal)) {
                    btn.classList.add('bg-blue-600', 'text-white', 'border-blue-600');
                    icon.classList.remove('hidden');
                } else {
                    btn.classList.remove('bg-blue-600', 'text-white', 'border-blue-600');
                    icon.classList.add('hidden');
                }
            });
            lucide.createIcons();
        }

        function nextStep() {
            if (currentStep < totalSteps) {
                currentStep++;
                updateUI();
            }
        }

        function prevStep() {
            if (currentStep > 0) {
                currentStep--;
                updateUI();
            }
        }

        function updateUI() {
            // Hide all steps
            document.querySelectorAll('.step-content').forEach(el => el.classList.remove('active'));
            // Show current step
            document.getElementById(`step-${currentStep}`).classList.add('active');

            // Progress bar & indicator
            const progress = (currentStep / totalSteps) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;
            document.getElementById('step-indicator').innerText = `Step ${currentStep + 1} of ${totalSteps + 1}`;

            // Buttons
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const footer = document.getElementById('footer-nav');

            if (currentStep === 0) {
                prevBtn.disabled = true;
                prevBtn.classList.add('text-gray-300', 'cursor-not-allowed');
                prevBtn.classList.remove('text-gray-600', 'hover:bg-gray-200');
            } else {
                prevBtn.disabled = false;
                prevBtn.classList.remove('text-gray-300', 'cursor-not-allowed');
                prevBtn.classList.add('text-gray-600', 'hover:bg-gray-200');
            }

            if (currentStep === totalSteps) {
                footer.style.display = 'none';
            } else {
                footer.style.display = 'flex';
                nextBtn.innerHTML = currentStep === totalSteps - 1 ? `Review <i data-lucide="chevron-right" class="w-5 h-5"></i>` : `Continue <i data-lucide="chevron-right" class="w-5 h-5"></i>`;
                lucide.createIcons();
            }
        }

        window.onload = init;
    </script>
</body>
</html>